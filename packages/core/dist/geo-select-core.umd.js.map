{"version":3,"file":"geo-select-core.umd.js","sources":["../src/utils.ts","../src/core.ts"],"sourcesContent":["import type { Region } from './types';\r\n\r\n/** equirectangular projection (lon,lat) -> x,y */\r\nexport function project(lon: number, lat: number, width: number, height: number): [number, number] {\r\n  const x = ((lon + 180) / 360) * width;\r\n  const y = ((90 - lat) / 180) * height;\r\n  return [x, y];\r\n}\r\n\r\nfunction centroidOfCoordinates(coords: number[][]): [number, number] {\r\n  let sumX = 0, sumY = 0, count = 0;\r\n  coords.forEach(([lon, lat]) => {\r\n    sumX += lon;\r\n    sumY += lat;\r\n    count += 1;\r\n  });\r\n  return [sumX / count, sumY / count];\r\n}\r\n\r\nexport function featureCentroid(feature: GeoJSON.Feature): [number, number] | null {\r\n  if (!feature.geometry) return null;\r\n  const g = feature.geometry;\r\n  if (g.type === 'Polygon') {\r\n    // Polygon: [ [ [lon,lat], ... ] , ... ]\r\n    const rings = g.coordinates as number[][][];\r\n    return centroidOfCoordinates(rings[0]);\r\n  }\r\n  if (g.type === 'MultiPolygon') {\r\n    const multipolys = g.coordinates as number[][][][];\r\n    // pick the first polygon's first ring\r\n    if (multipolys.length > 0 && multipolys[0].length > 0) {\r\n      return centroidOfCoordinates(multipolys[0][0]);\r\n    }\r\n    return null;\r\n  }\r\n  if (g.type === 'Point') {\r\n    const p = g.coordinates as number[];\r\n    return [p[0], p[1]];\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function toRegion(feature: GeoJSON.Feature): Region {\r\n  const props = (feature.properties || {}) as any;\r\n  const id = props.ISO_A3 || props.iso_a3 || props.id || props.code || undefined;\r\n  const name = props.NAME || props.ADMIN || props.name || undefined;\r\n  const cent = featureCentroid(feature) || undefined;\r\n  return { id, name, properties: props, centroid: cent };\r\n}","import type { GeoCoreOptions, Region } from './types';\r\nimport { project, toRegion } from './utils';\r\n\r\nexport class GeoCore {\r\n  private container: HTMLElement;\r\n  private svg: SVGSVGElement | null = null;\r\n  private opts: Required<GeoCoreOptions>;\r\n  private geojson: GeoJSON.FeatureCollection | null = null;\r\n  private listeners: { select: ((r: Region) => void)[] } = { select: [] };\r\n\r\n  constructor(container: HTMLElement | null, options: GeoCoreOptions = {}) {\r\n    if (!container) throw new Error('container HTMLElement is required');\r\n    this.container = container;\r\n    this.opts = {\r\n      width: options.width || 900,\r\n      height: options.height || 450,\r\n      dataUrl: options.dataUrl || '',\r\n      data: options.data || (null as any),\r\n      initialFill: options.initialFill || '#e6e6e6',\r\n      highlightFill: options.highlightFill || '#ffcc00',\r\n      onReady: options.onReady || (() => {})\r\n    };\r\n\r\n    void this.init();\r\n  }\r\n\r\n  private async init() {\r\n    this.createSvg();\r\n    if (this.opts.data) {\r\n      this.geojson = this.opts.data;\r\n      this.render();\r\n      this.opts.onReady();\r\n    } else if (this.opts.dataUrl) {\r\n      await this.loadData(this.opts.dataUrl);\r\n      this.render();\r\n      this.opts.onReady();\r\n    } else {\r\n      this.container.textContent = 'No geojson provided. Use options.data or options.dataUrl';\r\n    }\r\n  }\r\n\r\n  private async loadData(url: string) {\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error('Failed to load geojson');\r\n    this.geojson = await res.json();\r\n  }\r\n\r\n  private createSvg() {\r\n    this.container.innerHTML = '';\r\n    const svgNS = 'http://www.w3.org/2000/svg';\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    svg.setAttribute('width', String(this.opts.width));\r\n    svg.setAttribute('height', String(this.opts.height));\r\n    svg.setAttribute('viewBox', `0 0 ${this.opts.width} ${this.opts.height}`);\r\n    svg.style.display = 'block';\r\n    this.svg = svg;\r\n    this.container.appendChild(svg);\r\n  }\r\n\r\n  private render() {\r\n    if (!this.svg || !this.geojson) return;\r\n    const svg = this.svg;\r\n    const g = document.createElementNS(svg.namespaceURI, 'g');\r\n\r\n    this.geojson.features.forEach((feature, i) => {\r\n      const path = document.createElementNS(svg.namespaceURI, 'path');\r\n      const d = this.pathFromGeometry(feature.geometry);\r\n      path.setAttribute('d', d);\r\n      path.setAttribute('fill', this.opts.initialFill);\r\n      path.setAttribute('stroke', '#999');\r\n      path.setAttribute('data-index', String(i));\r\n      // 타입 캐스팅으로 style 사용\r\n      (path as SVGPathElement).style.cursor = 'pointer';\r\n\r\n      path.addEventListener('click', () => {\r\n        const region = toRegion(feature);\r\n        this.emit('select', region);\r\n        this.highlight(path as SVGPathElement);\r\n      });\r\n\r\n      path.addEventListener('mouseenter', () => {\r\n        path.setAttribute('opacity', '0.9');\r\n      });\r\n      path.addEventListener('mouseleave', () => {\r\n        path.setAttribute('opacity', '1');\r\n      });\r\n\r\n      g.appendChild(path);\r\n    });\r\n\r\n    svg.appendChild(g);\r\n  }\r\n\r\n  private pathFromGeometry(geom: GeoJSON.Geometry | null): string {\r\n    if (!geom) return '';\r\n    const w = this.opts.width;\r\n    const h = this.opts.height;\r\n\r\n    const ringToPath = (ring: number[][]) =>\r\n      ring.map(([lon, lat], idx) => {\r\n        const [x, y] = project(lon, lat, w, h);\r\n        return `${idx === 0 ? 'M' : 'L'} ${x} ${y}`;\r\n      }).join(' ') + ' Z';\r\n\r\n    if (geom.type === 'Polygon') {\r\n      const rings = geom.coordinates as number[][][];\r\n      return rings.map(r => ringToPath(r)).join(' ');\r\n    }\r\n    if (geom.type === 'MultiPolygon') {\r\n      const polys = geom.coordinates as number[][][][];\r\n      return polys.map(poly => poly.map(r => ringToPath(r)).join(' ')).join(' ');\r\n    }\r\n    if (geom.type === 'Point') {\r\n      const [lon, lat] = geom.coordinates as number[];\r\n      const [x, y] = project(lon, lat, w, h);\r\n      return `M ${x - 2} ${y - 2} L ${x + 2} ${y - 2} L ${x + 2} ${y + 2} L ${x - 2} ${y + 2} Z`;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  private highlight(pathEl: SVGPathElement) {\r\n    if (!this.svg) return;\r\n    const paths = this.svg.querySelectorAll('path');\r\n    paths.forEach(p => (p as SVGPathElement).setAttribute('fill', this.opts.initialFill));\r\n    pathEl.setAttribute('fill', this.opts.highlightFill);\r\n  }\r\n\r\n  on(eventName: 'select', handler: (r: Region) => void) {\r\n    this.listeners.select.push(handler);\r\n  }\r\n\r\n  private emit(eventName: 'select', region: Region) {\r\n    this.listeners.select.forEach(h => h(region));\r\n  }\r\n\r\n  search(query: string) {\r\n    if (!this.geojson || !this.svg) return;\r\n    const q = query.toLowerCase().trim();\r\n    const matches: number[] = [];\r\n    this.geojson.features.forEach((f, i) => {\r\n      const props = (f.properties || {}) as any;\r\n      const name = (props.NAME || props.ADMIN || props.name || '').toString().toLowerCase();\r\n      const iso = (props.ISO_A3 || props.iso_a3 || props.code || '').toString().toLowerCase();\r\n      if (name.includes(q) || iso.includes(q)) matches.push(i);\r\n    });\r\n    const svgPaths = this.svg.querySelectorAll('path');\r\n    svgPaths.forEach((p, idx) => {\r\n      const fill = matches.includes(idx) ? this.opts.highlightFill : this.opts.initialFill;\r\n      (p as SVGPathElement).setAttribute('fill', fill);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    if (this.svg && this.container.contains(this.svg)) this.container.removeChild(this.svg);\r\n    this.svg = null;\r\n    this.geojson = null;\r\n    this.listeners = { select: [] };\r\n  }\r\n}"],"names":[],"mappings":"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"}